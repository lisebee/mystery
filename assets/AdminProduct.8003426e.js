import{_ as U,a as M,b as $,c as I}from"./pencil.c8dd302e.js";import{_ as V}from"./trash.2ef4634c.js";import{a as u}from"./index.ba57a07c.js";import{_ as C}from"./x.2ff6d6c5.js";import{o as l,e as d,f as e,g as m,j as h,s as a,v as _,u as P,k as b,c as k,t as c,F as f,i as w,h as T}from"./vendor.2abb9eaf.js";import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";import"./axios.dad79325.js";const A={props:["openModal"],data(){return{imgsIndex:0,pd:{title:"",category:"",unit:"",origin_price:"",price:"",description:"",content:"",is_enabled:!1,imageUrl:"",imagesUrl:[]}}},methods:{appendInput(){console.log("count===========> ok"),this.imgsIndex+=1,console.log("this.imgsIndex===========>",this.imgsIndex)},addPD(){const i=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");u.defaults.headers.common.Authorization=i;const o={data:{title:this.pd.title,category:this.pd.category,unit:this.pd.unit,origin_price:this.pd.origin_price,price:this.pd.price,description:this.pd.description,content:this.pd.content,is_enabled:this.pd.is_enabled,imageUrl:this.pd.imageUrl,imagesUrl:this.pd.imagesUrl}};u.post("https://vue3-course-api.hexschool.io/v2/api/dobe/admin/product",o).then(r=>{console.log("res.data====>",r.data)}).catch(r=>console.log(r))}}},z={key:0,class:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-75"},B={class:"relative w-[1000px] mx-auto bg-slate-700 border border-slate-500 rounded p-10 mt-4"},N={class:"grid grid-cols-2"},S={class:"py-4 px-8"},F={class:"flex justify-between items-center w-full mb-2"},G=e("label",{for:"title",class:"w-1/4 font-bold text-white"},"\u7522\u54C1\u540D\u7A31",-1),E={class:"flex justify-between items-center w-full mb-2"},L=e("label",{for:"category",class:"w-1/4 font-bold text-white"},"\u5206\u985E",-1),q={class:"flex justify-between items-center w-full mb-2"},H=e("label",{for:"unit",class:"w-1/4 font-bold text-white"},"\u55AE\u4F4D",-1),J={class:"flex justify-between items-center w-full mb-2"},K=e("label",{for:"origin_price",class:"w-1/4 font-bold text-white"},"\u539F\u50F9",-1),O={class:"flex justify-between items-center w-full mb-2"},Q=e("label",{for:"price",class:"w-1/4 font-bold text-white"},"\u552E\u50F9",-1),R={class:"flex justify-between items-center w-full mb-2"},W=e("label",{for:"description",class:"w-1/4 font-bold text-white"},"\u7522\u54C1\u63CF\u8FF0",-1),X={class:"flex justify-between items-center w-full mb-2"},Y=e("label",{for:"content",class:"w-1/4 font-bold text-white"},"\u8AAA\u660E\u5167\u5BB9",-1),Z={class:"flex justify-start items-center w-full mb-2"},ee=e("label",{for:"is_enabled",class:"w-1/4 font-bold text-white"},"\u662F\u5426\u555F\u7528",-1),te={class:"py-4 px-8"},oe={class:"flex justify-between items-center w-full mb-2"},se=e("label",{for:"imageUrl",class:"w-1/4 font-bold text-white"},"\u5C01\u9762\u5716\u7247",-1),ne={class:"flex justify-center"},le=["src"],ie={class:"flex justify-between items-center w-full mb-2"},de=e("label",{for:"",class:"w-1/4 font-bold text-white"},"\u9644\u52A0\u5716\u7247",-1),ce=["disabled"],re=e("div",{class:"flex justify-between items-center w-60 mx-auto mt-10"},[e("button",{type:"button",class:"font-bold bg-slate-400 rounded py-2 px-8 hover:bg-amber-300"}," \u53D6\u6D88 "),e("button",{type:"submit",class:"font-bold bg-slate-400 rounded py-2 px-8 hover:bg-amber-300"}," \u78BA\u8A8D ")],-1);function ae(i,o,r,g,t,p){const x=C,y=U;return(r.openModal=!0)?(l(),d("div",z,[e("div",B,[e("button",{type:"button",class:"absolute top-3 right-3",onClick:o[0]||(o[0]=s=>i.$emit("close"))},[m(x,{class:"w-5 h-5 text-white"})]),e("form",{onSubmit:o[11]||(o[11]=h((...s)=>p.addPD&&p.addPD(...s),["prevent"]))},[e("div",N,[e("div",S,[e("div",F,[G,a(e("input",{id:"title",class:"w-3/4 caret-red-500 bg-sky-100/75 rounded",type:"text",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u540D\u7A31","onUpdate:modelValue":o[1]||(o[1]=s=>t.pd.title=s)},null,512),[[_,t.pd.title]])]),e("div",E,[L,a(e("input",{id:"category",class:"w-3/4 caret-red-500 bg-sky-100/75 rounded",type:"text",placeholder:"\u8ACB\u8F38\u5165\u54C1\u5206\u985E","onUpdate:modelValue":o[2]||(o[2]=s=>t.pd.category=s)},null,512),[[_,t.pd.category]])]),e("div",q,[H,a(e("input",{id:"unit",class:"w-3/4 caret-red-500 bg-sky-100/75 rounded",type:"text",placeholder:"\u8ACB\u8F38\u5165\u55AE\u4F4D","onUpdate:modelValue":o[3]||(o[3]=s=>t.pd.unit=s)},null,512),[[_,t.pd.unit]])]),e("div",J,[K,a(e("input",{id:"origin_price",class:"w-3/4 caret-red-500 bg-sky-100/75 rounded",type:"number",placeholder:"\u8ACB\u8F38\u5165\u539F\u50F9","onUpdate:modelValue":o[4]||(o[4]=s=>t.pd.origin_price=s)},null,512),[[_,t.pd.origin_price]])]),e("div",O,[Q,a(e("input",{id:"price",class:"w-3/4 caret-red-500 bg-sky-100/75 rounded",type:"number",placeholder:"\u8ACB\u8F38\u5165\u552E\u50F9","onUpdate:modelValue":o[5]||(o[5]=s=>t.pd.price=s)},null,512),[[_,t.pd.price]])]),e("div",R,[W,a(e("textarea",{id:"description",name:"description",class:"w-3/4 caret-red-500 bg-sky-100/75 rounded",rows:"3",placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u63CF\u8FF0","onUpdate:modelValue":o[6]||(o[6]=s=>t.pd.description=s)},`
              `,512),[[_,t.pd.description]])]),e("div",X,[Y,a(e("textarea",{id:"content",name:"content",class:"w-3/4 caret-red-500 bg-sky-100/75 rounded",rows:"3",placeholder:"\u8ACB\u8F38\u5165\u8AAA\u660E\u5167\u5BB9","onUpdate:modelValue":o[7]||(o[7]=s=>t.pd.content=s)},`
              `,512),[[_,t.pd.content]])]),e("div",Z,[ee,a(e("input",{id:"is_enabled",type:"checkbox",class:"bg-sky-100/75 rounded","onUpdate:modelValue":o[8]||(o[8]=s=>t.pd.is_enabled=s)},null,512),[[P,t.pd.is_enabled]])])]),e("div",te,[e("div",oe,[se,a(e("input",{id:"imageUrl",class:"w-3/4 bg-sky-100/75 rounded",type:"text",placeholder:"\u8ACB\u8F38\u5165\u5716\u7247\u9023\u7D50","onUpdate:modelValue":o[9]||(o[9]=s=>t.pd.imageUrl=s)},null,512),[[_,t.pd.imageUrl]])]),e("div",ne,[t.pd.imageUrl?(l(),d("img",{key:0,src:t.pd.imageUrl,class:"h-32"},null,8,le)):b("",!0)]),e("div",ie,[de,e("button",{class:"w-3/4 text-white py-2 border-2 hover:bg-slate-800",onClick:o[10]||(o[10]=(...s)=>p.appendInput&&p.appendInput(...s)),disabled:t.imgsIndex==5}," \u65B0\u589E\u5716\u7247 ",8,ce)]),t.imgsIndex>=1?(l(),k(y,{key:0,imgsIndex:t.imgsIndex,onGetImgVal:t.pd.imagesUrl},null,8,["imgsIndex","onGetImgVal"])):b("",!0)])]),re],32)])])):b("",!0)}var pe=D(A,[["render",ae]]);const ue={components:{Modal:pe},data(){return{openModal:!1,tableSubject:["\u5206\u985E","\u7522\u54C1\u540D\u7A31","\u539F\u50F9","\u552E\u50F9","\u555F\u7528","\u7DE8\u8F2F","\u7D30\u7BC0","\u522A\u9664"],productsData:[],productDetail:[]}},mounted(){const i=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");console.log("token====>",i),u.defaults.headers.common.Authorization=i,u.get("https://vue3-course-api.hexschool.io/v2/api/dobe/admin/products").then(o=>{console.log("read res.data.products====>",o.data.products),this.productsData=o.data.products,this.productDetail=o.data.products[0],console.log("read res.data.products[0]====>",o.data.products[0]),console.log("read this.productDetail====>",this.productDetail),console.log("read this.productDetail.category====>",this.productDetail.category)})},watch:{},methods:{controlModal(){this.openModal=!0},readPD(i){console.log("read id====>",i);const o=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");u.defaults.headers.common.Authorization=o,u.get(`${this.url}/api/${this.path}/admin/products`).then(r=>{console.log("read res.data====>",r.data),this.productDetail=r.data.products.filter(g=>g.id==i)})},removePD(i){const o=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");u.defaults.headers.common.Authorization=o,u.delete(`${this.url}/api/${this.path}/admin/product/${i}`).then(r=>{console.log("res.data====>",r.data),this.$router.push("/admin/products")})}}},_e={class:"max-w-2xl mx-auto lg:max-w-7xl px-4"},me={class:"flex justify-between py-4 mb-8"},he=e("h2",{class:"flex font-black text-2xl tracking-wide"},[e("span",null,"\u5546\u54C1\u7BA1\u7406")],-1),be=["openModal"],fe={class:"flex flex-row"},ge={class:"basis-1/4"},xe={key:0,class:"bg-slate-200 drop-shadow-2xl rounded p-4"},ye=e("h2",{class:"font-bold text-xl mb-4"},"\u7522\u54C1\u7D30\u7BC0",-1),we={class:"flex justify-center"},ve=["src"],ke={class:"text-left"},De={class:"font-bold text-l"},je={class:"inline-block text-xs bg-slate-700 text-white py-1 px-4"},Ue={class:"my-2"},Me={class:"my-2"},$e={class:"my-2"},Ie={class:"font-bold mr-2"},Ve={class:"line-through mr-2"},Ce=T("\u500B/\u5143 "),Pe={class:"flex flex-wrap"},Te=["src"],Ae={key:1,class:"font-bold text-xl"},ze={class:"basis-3/4 pl-4"},Be={class:"w-full"},Ne={class:"border-b-2"},Se={class:"py-4 px-6"},Fe={key:0,class:"text-green-700 font-medium"},Ge={key:1,class:"text-slate-400 font-medium"},Ee=["onClick"],Le=["onClick"],qe=["onClick"],He={class:"py-4"};function Je(i,o,r,g,t,p){const x=$,y=I,s=V,j=M;return l(),d(f,null,[e("div",_e,[e("div",me,[he,e("button",{class:"bg-cyan-900 text-cyan-200 rounded py-2 px-4 hover:bg-cyan-700",type:"submit",onClick:o[0]||(o[0]=(...n)=>p.controlModal&&p.controlModal(...n)),openModal:t.openModal}," \u5EFA\u7ACB\u65B0\u7522\u54C1 ",8,be)]),e("div",fe,[e("div",ge,[t.productDetail.id?(l(),d("div",xe,[ye,e("div",null,[e("div",we,[e("img",{src:t.productDetail.imageUrl,class:"h-auto w-40"},null,8,ve)]),e("div",ke,[e("h3",De,c(t.productDetail.title),1),e("span",je,c(t.productDetail.category),1),e("p",Ue,c(t.productDetail.description),1),e("p",Me,c(t.productDetail.content),1),e("p",$e,[e("span",Ie,c(t.productDetail.price),1),e("span",Ve,c(t.productDetail.origin_price),1),Ce])]),e("div",Pe,[(l(!0),d(f,null,w(t.productDetail.imagesUrl,n=>(l(),d("img",{src:n,class:"h-9 border border-slate-50",key:n},null,8,Te))),128))])])])):(l(),d("p",Ae,"\u8ACB\u9078\u64C7\u4E00\u500B\u5546\u54C1\u67E5\u770B"))]),e("div",ze,[e("table",Be,[e("thead",null,[e("tr",Ne,[(l(!0),d(f,null,w(t.tableSubject,n=>(l(),d("td",{class:"font-bold py-2 px-4",key:n+1},c(n),1))),128))])]),e("tbody",null,[(l(!0),d(f,null,w(t.productsData,n=>(l(),d("tr",{class:"border-b",key:n.id},[e("td",Se,c(n.category),1),e("td",null,c(n.title),1),e("td",null,c(n.origin_price),1),e("td",null,c(n.price),1),n.is_enabled?(l(),d("td",Fe,"\u555F\u7528")):(l(),d("td",Ge,"\u672A\u555F\u7528")),e("td",null,[e("button",{onClick:h(v=>i.editPD(this.removeID=n.id),["prevent"])},[m(x,{class:"w-6 h-6 text-cyan-700 mx-auto"})],8,Ee)]),e("td",null,[e("button",{onClick:h(v=>t.productDetail=n,["prevent"])},[m(y,{class:"w-6 h-6 text-cyan-700 mx-auto"})],8,Le)]),e("td",null,[e("button",{onClick:h(v=>p.removePD(this.removeID=n.id),["prevent"])},[m(s,{class:"w-6 h-6 text-cyan-700 mx-auto"})],8,qe)])]))),128))]),e("tfoot",null,[e("tr",null,[e("td",He,"\u76EE\u524D\u6709 "+c(t.productsData.length)+" \u9805\u7522\u54C1",1)])])])])])]),t.openModal?(l(),k(j,{key:0,onClose:o[1]||(o[1]=n=>t.openModal=!1),openModal:t.openModal},null,8,["openModal"])):b("",!0)],64)}var Ze=D(ue,[["render",Je]]);export{Ze as default};
